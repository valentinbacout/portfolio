/*
  Modern rebuild (HTML/CSS/JS only)
  - keeps a dark / teal palette and a vertical timeline with scroll activation
*/

:root {
  /* Default to system theme (light/dark) + allow form controls to match */
  color-scheme: light dark;

  /* Light tokens (default) */
  --bg: #f7f8fc;
  --panel: rgba(10, 18, 35, .06);
  --panel-2: rgba(10, 18, 35, .10);

  --text: rgba(10, 18, 35, .92);
  --muted: rgba(10, 18, 35, .70);
  --faint: rgba(10, 18, 35, .55);

  --stroke: rgba(10, 18, 35, .14);
  --shadow: 0 18px 60px rgba(10, 18, 35, .12);

  --accent: #0ea5a6;
  --accent-2: #7c3aed;
  --danger: #e11d48;

  --radius: 18px;
  --radius-lg: 26px;
  --max: 1100px;
  --header-h: 74px;

  --scroll-pad-top: var(--header-h);

  /* Gate overlay tint (semi-transparent so backdrop blur is visible) */
}

html[data-theme="light"] {
  color-scheme: light;

  --bg: #f7f8fc;
  --panel: rgba(10, 18, 35, .06);
  --panel-2: rgba(10, 18, 35, .10);

  --text: rgba(10, 18, 35, .92);
  --muted: rgba(10, 18, 35, .70);
  --faint: rgba(10, 18, 35, .55);

  --stroke: rgba(10, 18, 35, .14);
  --shadow: 0 18px 60px rgba(10, 18, 35, .12);

  --accent: #0ea5a6;
  --accent-2: #7c3aed;
  --danger: #e11d48;

}

/* System dark preference (only used when user didn't force a theme) */
@media (prefers-color-scheme: dark) {
  :root {
    --bg: #0b1020;
    --panel: rgba(255, 255, 255, .06);
    --panel-2: rgba(255, 255, 255, .09);

    --text: rgba(255, 255, 255, .92);
    --muted: rgba(255, 255, 255, .72);
    --faint: rgba(255, 255, 255, .55);

    --stroke: rgba(255, 255, 255, .12);
    --shadow: 0 18px 60px rgba(0, 0, 0, .45);

    --accent: #5bc0be;
    --accent-2: #9b5cff;
    --danger: #ff5a7a;

  }
}

/* Forced themes (user toggle) */
html[data-theme="light"] {
  color-scheme: light;
}

html[data-theme="dark"] {
  color-scheme: dark;

  --bg: #0b1020;
  --panel: rgba(255, 255, 255, .06);
  --panel-2: rgba(255, 255, 255, .09);

  --text: rgba(255, 255, 255, .92);
  --muted: rgba(255, 255, 255, .72);
  --faint: rgba(255, 255, 255, .55);

  --stroke: rgba(255, 255, 255, .12);
  --shadow: 0 18px 60px rgba(0, 0, 0, .45);

  --accent: #5bc0be;
  --accent-2: #9b5cff;
  --danger: #ff5a7a;

}

* {
  box-sizing: border-box;
}

html,
body {
  height: 100%;
}

html,
body {
  max-width: 100%;
  overflow-x: hidden;
}

body {
  margin: 0;
  font-family: "Poppins", system-ui, sans-serif;
  /*font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;*/
  background: var(--bg);
  color: var(--text);
  line-height: 1.55;
  overflow-x: hidden;
}

/* ============================================================
   Aurora background (subtle blue + green)
   - does NOT break existing layout
   - works in dark + light themes
============================================================ */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -2;
  pointer-events: none;

  background:
    radial-gradient(900px 550px at 20% 15%,
      rgba(56, 189, 248, 0.22),
      transparent 65%),
    radial-gradient(800px 520px at 85% 20%,
      rgba(34, 197, 94, 0.18),
      transparent 65%),
    radial-gradient(900px 650px at 55% 85%,
      rgba(56, 189, 248, 0.10),
      transparent 70%);

  filter: blur(34px);
  opacity: 0.65;
}

a {
  color: inherit;
  text-decoration: none;
}

a:hover {
  text-decoration: underline;
}

.container {
  max-width: var(--max);
  margin: 0 auto;
  padding: 0 22px;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid var(--stroke);
  background: var(--panel);
  color: var(--text);
  font-weight: 600;
  cursor: pointer;
}

.btn:hover {
  background: var(--panel-2);
  text-decoration: none;
}

.btn--primary {
  background: linear-gradient(135deg, color-mix(in oklab, var(--accent) 70%, #000 0%), color-mix(in oklab, var(--accent-2) 65%, #000 0%));
  border-color: color-mix(in oklab, var(--accent) 40%, var(--stroke));
}

.btn--primary:hover {
  filter: brightness(1.04);
}

.btn--ghost {
  background: transparent;
}

.btn--link {
  background: transparent;
  border-color: transparent;
  color: var(--muted);
  padding: 10px 10px;
}

.btn--link:hover {
  color: var(--text);
  text-decoration: underline;
}

/* Hero */
.hero {
  position: relative;
  padding: 46px 0 22px;
}

.hero__grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 18px;
  align-items: start;
}

.kicker {
  color: var(--faint);
  font-weight: 700;
  letter-spacing: .12em;
  text-transform: uppercase;
  font-size: 12px;
  margin: 0 0 10px;
}

.hero__title {
  font-size: clamp(30px, 4vw, 52px);
  line-height: 1.05;
  margin: 0 0 12px;
  letter-spacing: -0.04em;
}

.hero__lead {
  margin: 0 0 16px;
  color: var(--muted);
  max-width: 62ch;
}

.accent {
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.hero__cta {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 12px;
}

.hero__links {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 16px;
}

.linkPill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 12px;
  border-radius: 999px;
  border: 1px solid var(--stroke);
  background: transparent;
  color: var(--muted);
  font-weight: 700;
  font-size: 13px;
}

.linkPill:hover {
  color: var(--text);
  background: var(--panel);
  text-decoration: none;
}

.hero__meta {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
}

@media (max-width: 700px) {
  .hero__meta {
    grid-template-columns: 1fr;
  }
}

.metaCard {
  border: 1px solid var(--stroke);
  background: var(--panel);
  border-radius: var(--radius);
  padding: 14px 14px;
}

.metaCard__label {
  color: var(--faint);
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .08em;
}

.metaCard__value {
  font-weight: 650;
  margin-top: 6px;
}

.hero__bg {
  position: absolute;
  inset: -240px -140px auto -140px;
  height: 520px;
  background:
    radial-gradient(closest-side, color-mix(in oklab, var(--accent) 16%, transparent), transparent 70%),
    radial-gradient(closest-side, color-mix(in oklab, var(--accent-2) 12%, transparent), transparent 70%);
  filter: blur(26px);
  opacity: .55;
  z-index: -1;
}

/* Sections */
.section {
  padding: 44px 0;
}

.section--alt {
  background: color-mix(in oklab, var(--panel) 35%, transparent);
  border-top: 1px solid var(--stroke);
  border-bottom: 1px solid var(--stroke);
}

.section__head {
  margin-bottom: 18px;
}

.section__title {
  margin: 0 0 8px;
  font-size: 26px;
  letter-spacing: -.02em;
}

.section__subtitle {
  margin: 0;
  color: var(--muted);
  max-width: 90ch;
}

.grid2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
}

@media (max-width: 900px) {
  .grid2 {
    grid-template-columns: 1fr;
  }
}

.card {
  border: 1px solid var(--stroke);
  background: var(--panel);
  border-radius: var(--radius);
  padding: 18px;
  box-shadow: 0 0 0 rgba(0, 0, 0, 0);
}

.card h3 {
  margin: 0 0 8px;
  letter-spacing: -.02em;
}

.card p {
  margin: 0 0 10px;
  color: var(--muted);
}

.card p:last-child {
  margin-bottom: 0;
}

.list {
  margin: 0;
  padding-left: 18px;
  color: var(--muted);
}

.list li {
  margin: 6px 0;
}

.skills {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 14px;
}

@media (max-width: 1000px) {
  .skills {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 600px) {
  .skills {
    grid-template-columns: 1fr;
  }
}

.tags {
  list-style: none;
  padding: 0;
  margin: 10px 0 0;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.tags li {
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid var(--stroke);
  background: color-mix(in oklab, var(--panel) 70%, transparent);
  color: var(--muted);
  font-weight: 600;
  font-size: 12px;
}

/* Projects */
.projects,
.engagements {
  /* All cards in one row + horizontal scroll */
  display: flex;
  gap: 14px;

  overflow-x: auto;
  overflow-y: visible;

  scroll-behavior: auto;
  /* keep drag immediate (like timeline) */
  -webkit-overflow-scrolling: touch;
  padding: 2px var(--carousel-pad, 6px) 14px;

  /* Centered carousel (JS sets --carousel-pad) */
  scroll-snap-type: x mandatory;
  scroll-padding-inline: var(--carousel-pad, 0px);
  overscroll-behavior-x: contain;

  /* Drag-to-scroll (like the timeline) */
  cursor: grab;
  user-select: none;
  -webkit-user-select: none;
  touch-action: pan-x pinch-zoom;
  /* Hide scrollbar (keep scrollable) */
  scrollbar-width: none;
  /* Firefox */
  -ms-overflow-style: none;
  /* IE/Edge legacy */

  /* Default: no fade mask */
  -webkit-mask-image: none;
  mask-image: none;
}

/* Cards snap to center inside horizontal scrollers */
.projects>.project,
.engagements>.project {
  scroll-snap-align: center;
  scroll-snap-stop: always;
}

/* Enable centered layout only when carousel mode is on (>=3 cards) */
.projects.is-carousel,
.engagements.is-carousel {
  --carousel-pad: 0px;
}

.projects::-webkit-scrollbar,
.engagements::-webkit-scrollbar {
  display: none;
  /* Chrome/Safari */
}

.projects.is-dragging,
.engagements.is-dragging {
  cursor: grabbing;
  scroll-snap-type: none;
  /* <- IMPORTANT : pas de snap pendant le drag souris */
  scroll-behavior: auto;
  /* <- évite toute animation pendant le drag */
}

.projects.is-static,
.engagements.is-static {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 14px;

  overflow-x: hidden !important;
  scroll-snap-type: none !important;

  -webkit-mask-image: none !important;
  mask-image: none !important;

  cursor: default;
  user-select: auto;
  touch-action: auto;

  padding: 2px 0 14px;
  /* pas de padding latéral “carousel” */
}

.projects.is-static>.project,
.engagements.is-static>.project {
  width: 100%;
  min-width: 0;
  flex: initial;
  /* neutralise le flex: 0 0 clamp(...) */
}

@media (max-width: 700px) {

  .projects.is-static,
  .engagements.is-static {
    grid-template-columns: 1fr;
    /* mobile: stack */
  }
}

/* Fade only when overflow exists (values driven by JS) */
.projects.pr-can-scroll,
.engagements.pr-can-scroll {
  --fadeL: 8%;
  --fadeR: 8%;

  -webkit-mask-image: linear-gradient(to right,
      transparent 0%,
      black var(--fadeL),
      black calc(100% - var(--fadeR)),
      transparent 100%);
  mask-image: linear-gradient(to right,
      transparent 0%,
      black var(--fadeL),
      black calc(100% - var(--fadeR)),
      transparent 100%);
}

/* ✅ Supprime le flou de bord sur mobile */
@media (max-width: 700px) {

  .projects.pr-can-scroll,
  .engagements.pr-can-scroll {
    -webkit-mask-image: none !important;
    mask-image: none !important;
  }

}

/* Carousel dots (pagination) */
.carousel-dots {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;

  margin-top: 12px;
  padding-bottom: 4px;

  /* prevents accidental selection while dragging */
  user-select: none;
  -webkit-user-select: none;
}

.carousel-dot {
  width: 9px;
  height: 9px;
  border-radius: 999px;

  border: 1px solid var(--stroke);
  background: color-mix(in oklab, var(--panel) 70%, transparent);
  opacity: 0.85;

  cursor: pointer;
  padding: 0;
  /* if button */
}

.carousel-dot.is-active {
  background: var(--bg);
  border-color: color-mix(in oklab, var(--accent) 65%, var(--stroke));
  transform: scale(1.3);
  /* plus évident */
  opacity: 1;
}

.project {
  flex: 0 0 clamp(320px, 70vw, 520px);
  border: 1px solid var(--stroke);
  border-left: 4px solid var(--project-accent, var(--accent));
  background: linear-gradient(180deg, var(--panel), transparent);
  border-radius: var(--radius-lg);
  padding: 18px;
  box-shadow: var(--shadow);
}

.project__top {
  display: flex;
  align-items: center;
  gap: 10px;
}

.project__top:has(.project__pill) {
  justify-content: space-between;
}

.project__title {
  margin: 0;
  letter-spacing: -.02em;
}

.project__pill {
  font-size: 12px;
  font-weight: 700;
  padding: 8px 10px;
  border-radius: 999px;
  border: 1px solid var(--stroke);
  background: color-mix(in oklab, var(--panel) 75%, transparent);
}

.project__media {
  position: relative;
  width: 100%;
  padding-top: 56.25%;
  /* 16:9 */
  border-radius: 16px;
  overflow: hidden;
  border: 1px solid var(--stroke);
  margin: 12px 0 12px;
  background: #000;
}

.project__media>iframe {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border: 0;
}

.projects-wrapper {
  position: absolute;
  inset: 0;
  pointer-events: auto;
  /* <-- autorise les clics */
}

.video-strip iframe {
  position: relative;
  inset: auto;
  width: 100%;
  height: 100%;
  border: 0;
}

/* Hide scrollbar for video carousels */
.video-strip {
  scrollbar-width: none;
  /* Firefox */
  -ms-overflow-style: none;
  /* IE / old Edge */
}

.video-strip::-webkit-scrollbar {
  display: none;
  /* Chrome / Safari */
}

.project__desc {
  color: var(--muted);
  margin: 10px 0 14px;
}

.project__grid {
  margin-top: 16px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
  font-size: 0.8rem;
}

/* Engagements associatifs : layout spécifique */
#engagements-asso .project__grid {
  grid-template-columns: repeat(2, 1fr);
}

/* Compétences = pleine largeur */
#engagements-asso .project__grid .project__stat:first-child {
  grid-column: 1 / -1;
}

/* Listes Compétences : texte aligné, puces décalées */
#engagements-asso .project__stat .v ul {
  margin: 6px 0 0;
  padding-left: 0;
  list-style-position: outside;
}

/* Décalage contrôlé des puces */
#engagements-asso .project__stat .v li {
  margin-left: 14px;
  /* position du texte */
  padding-left: 0;
  margin-bottom: 4px;
}

/* ✅ Listes dans project__desc comme dans engagements */
.project__desc ul {
  margin: 8px 0 0;
  padding-left: 0;
  list-style-position: outside;
}

.project__desc li {
  margin-left: 14px;
  margin-bottom: 6px;
  color: var(--muted);
}

/* Logo */
#engagements-asso .project__logo {
  width: 44px;
  height: 44px;
  object-fit: contain;
  flex: 0 0 44px;
  /* empêche le logo de se rétrécir */

  /* option "badge" (garde ton style) */
  padding: 6px;
  border-radius: 12px;
  border: 1px solid var(--stroke);
  background: color-mix(in oklab, var(--panel) 70%, transparent);
}

.project__head {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.project__meta {
  margin: 0;
  font-size: 12px;
  font-weight: 650;
  color: var(--faint);
}

.project__img {
  width: 100%;
  height: 170px;
  object-fit: cover;
  border-radius: 16px;
  margin: 12px 0 12px;
  border: 1px solid var(--stroke);
}

@media (max-width: 520px) {
  .project__grid {
    grid-template-columns: 1fr;
  }
}

.video-strip {
  position: absolute;
  inset: 0;

  display: flex;
  gap: 12px;

  overflow-x: auto;
  scroll-snap-type: x mandatory;

  -webkit-overflow-scrolling: touch;
  pointer-events: auto;
  /* réactive le scroll */
}

.video-strip iframe {
  flex: 0 0 100%;
  scroll-snap-align: center;
}

.scroll-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 3;

  width: 42px;
  height: 42px;
  border-radius: 50%;

  border: 1px solid var(--stroke);
  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(8px);

  color: var(--text);
  font-size: 22px;
  font-weight: 700;

  cursor: pointer;
  pointer-events: auto;
  /* important */
  display: none;

  box-shadow:
    0 0 0 2px rgba(0, 0, 0, 0.35),
    0 8px 24px rgba(0, 0, 0, 0.45);
}

.scroll-btn.left {
  left: 8px;
}

.scroll-btn.right {
  right: 8px;
}

@media (min-width: 900px) {
  .scroll-btn {
    display: flex;
    align-items: center;
    justify-content: center;
  }
}

.project__stat {
  border: 1px solid var(--stroke);
  background: var(--panel);
  border-radius: 16px;
  padding: 12px;
}

.project__stat .k {
  color: var(--faint);
  font-size: 12px;
  font-weight: 700;
  letter-spacing: .08em;
  text-transform: uppercase;
}

.project__stat .v {
  margin-top: 6px;
  font-weight: 700;
}

section[id] {
  scroll-margin-top: calc(var(--header-h));
}

/* Contact */
.muted {
  color: var(--muted);
}

.contact {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 10px;
}

.contact__link {
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid var(--stroke);
  background: color-mix(in oklab, var(--panel) 70%, transparent);
  color: var(--muted);
  font-weight: 700;
  font-size: 13px;
}

.contact__link:hover {
  color: var(--text);
  text-decoration: none;
  background: var(--panel-2);
}

/* Footer */
.footer {
  margin-top: 80px;
  padding: 10px 0 10px;

  background: color-mix(in oklab, var(--panel) 85%, transparent);
  border-top: 1px solid var(--stroke);

  backdrop-filter: blur(14px);
}

.footer__grid {
  display: grid;
  grid-template-columns: 1.6fr 1fr 1fr 1fr;
  gap: 40px;
  align-items: start;
}

/* Brand */
.footer__brand h3 {
  margin: 0 0 10px;
  font-size: 18px;
  font-weight: 800;
}

.footer__brand p {
  margin: 0;
  color: var(--muted);
  max-width: 35ch;
}

/* Columns */
.footer__col h4 {
  margin-bottom: 12px;
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--faint);
}

.footer__col a {
  display: block;
  margin: 6px 0;
  font-weight: 600;
  color: var(--muted);
}

.footer__col a:hover {
  color: var(--text);
  text-decoration: underline;
}

/* Bottom strip */
.footer__bottom {
  margin-top: 50px;
  padding-top: 18px;
  border-top: 1px solid var(--stroke);
  text-align: center;
}

.footer__copy {
  font-size: 13px;
  color: var(--faint);
}
@media (max-width: 800px) {
  .footer__grid {
    grid-template-columns: 1fr;
    gap: 22px;
    text-align: center;
  }

  .footer__col a {
    display: inline-block;
    margin: 6px 10px;
  }
}


/* Small button variant */
.btn--small {
  padding: 8px 12px;
  border-radius: 14px;
  font-size: 13px;
}


/* Small helpers */
html {
  scroll-behavior: smooth;

  scroll-padding-top: var(--scroll-pad-top, 0px);
}

/* Reduce motion */
@media (prefers-reduced-motion: reduce) {
  * {
    scroll-behavior: auto !important;
    transition: none !important;
  }
}

/* ============================================================
   Horizontal timeline module (from timeline.html)
   - scoped to #timeline
   - uses global theme tokens (dark enforced)
============================================================ */
#timeline {
  /* Inherit global palette */
  --th-bg: var(--bg);
  --th-text: var(--text);
  --th-muted: var(--muted);
  --th-panel: var(--panel);
  --th-panel-2: var(--panel-2);
  --th-stroke: var(--stroke);
  --th-shadow: var(--shadow);

  /* Module layout */
  --th-radius: 14px;
  --lane-gap: 6px;
  --card-w: 260px;
  --card-gap: 12px;
  --axis-y: 240px;

  color: var(--th-text);
}

#timeline * {
  box-sizing: border-box;
}

#timeline .th-wrap {
  margin: 0 auto;
  padding: 0px 0px 0px;
}

#timeline .th-timeline {
  /*background: color-mix(in oklab, var(--th-panel) 85%, transparent);
  border: 1px solid var(--th-stroke);
  border-radius: var(--th-radius);
  box-shadow: var(--th-shadow);*/
  padding: 14px 12px 16px;
  overflow: visible;
}

/* Timeline scroller */
#timeline .th-scroller {
  overflow-x: auto;
  overflow-y: visible;
  padding: 10px 6px 14px;

  cursor: grab;
  user-select: none;
  -webkit-user-select: none;

  /* ✅ important : autorise le swipe horizontal natif (donc inertie) */
  touch-action: pan-x pinch-zoom;

  /* ✅ inertie iOS */
  -webkit-overflow-scrolling: touch;

  scrollbar-width: none;
  -ms-overflow-style: none;

  -webkit-mask-image: none;
  mask-image: none;
}

#timeline .th-scroller::-webkit-scrollbar {
  display: none;
  /* Chrome/Safari */
}

#timeline .th-scroller.is-dragging {
  cursor: grabbing;
}

/* Fade activé seulement si overflow */
#timeline .th-scroller.th-can-scroll {
  /* largeur du fondu (en %) : pilotée par JS */
  --fadeL: 8%;
  --fadeR: 8%;

  -webkit-mask-image: linear-gradient(to right,
      transparent 0%,
      black var(--fadeL),
      black calc(100% - var(--fadeR)),
      transparent 100%);
  mask-image: linear-gradient(to right,
      transparent 0%,
      black var(--fadeL),
      black calc(100% - var(--fadeR)),
      transparent 100%);
}

#timeline .th-stage {
  position: relative;
  min-height: 520px;
  padding: 18px 10px 22px;
}

/* Controls */
#timeline .th-controls {
  width: fit-content;
  display: inline-flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
  background: var(--th-panel);
  border: 1px solid var(--th-stroke);
  padding: 10px 12px;
  border-radius: 12px;
  margin-bottom: 10px;
}

#timeline .th-controls label {
  font-size: 12px;
  color: var(--th-muted);
  display: flex;
  align-items: center;
  gap: 8px;
}

#timeline .th-controls input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  width: 220px;
  height: 8px;
  border-radius: 999px;
  background: linear-gradient(135deg,
      color-mix(in oklab, var(--accent) 70%, #000 0%),
      color-mix(in oklab, var(--accent-2) 65%, #000 0%));
  outline: none;
  cursor: pointer;
}

/* Chrome / Safari */
#timeline .th-controls input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--bg);
  border: 2px solid var(--accent);
  box-shadow: 0 0 0 4px color-mix(in oklab, var(--accent) 25%, transparent);
}

/* Firefox */
#timeline .th-controls input[type="range"]::-moz-range-thumb {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--bg);
  border: 2px solid var(--accent);
  box-shadow: 0 0 0 4px color-mix(in oklab, var(--accent) 25%, transparent);
}

#timeline .th-controls input[type="range"]::-moz-range-track {
  height: 8px;
  border-radius: 999px;
  background: linear-gradient(135deg,
      color-mix(in oklab, var(--accent) 70%, #000 0%),
      color-mix(in oklab, var(--accent-2) 65%, #000 0%));
}

/* Axis & lanes */
#timeline .th-axis {
  position: absolute;
  left: 0;
  right: 0;
  top: var(--axis-y);
  height: 2px;
  transform: translateY(-1px);
  background: linear-gradient(90deg,
      transparent 0%,
      color-mix(in oklab, var(--th-muted) 90%, transparent) 8%,
      color-mix(in oklab, var(--th-muted) 90%, transparent) 92%,
      transparent 100%);
}

#timeline .th-lanes {
  position: absolute;
  left: 0;
  right: 0;
  top: var(--axis-y);
  height: 180px;
  transform: translateY(-50%);
  pointer-events: none;
}

/* Events */
#timeline .th-event {
  position: absolute;
  left: 0;
  top: 0;
  pointer-events: auto;
}

#timeline .th-seg {
  position: absolute;
  height: 10px;
  border-radius: 999px;
  opacity: .95;
  box-shadow:
    0 0 0 2px color-mix(in oklab, var(--th-bg) 92%, transparent),
    0 0 0 1px rgba(255, 255, 255, .18) inset;
}

#timeline .th-dot {
  position: absolute;
  width: 10px;
  height: 10px;
  border-radius: 999px;
  transform: translate(-50%, -50%);
  opacity: .95;
  box-shadow:
    0 0 0 2px color-mix(in oklab, var(--th-bg) 92%, transparent),
    0 0 0 1px rgba(255, 255, 255, .18) inset;
}

#timeline .th-connector {
  position: absolute;
  width: 2px;
  background: color-mix(in oklab, var(--th-muted) 35%, transparent);
  transform: translateX(-1px);
}

/* Cards */
#timeline .th-card {
  position: absolute;
  width: var(--card-w);

  background: color-mix(in oklab, var(--th-bg) 88%, var(--th-panel) 12%);
  border: 1px solid color-mix(in oklab, var(--th-stroke) 90%, transparent);
  border-radius: 14px;
  padding: 10px 11px 10px;

  box-shadow: 0 10px 26px rgba(0, 0, 0, .35);
  backdrop-filter: blur(6px);
  transform: none;
}

#timeline .th-card h3 {
  margin: 0;
  font-size: 13px;
  display: flex;
  align-items: center;
  gap: 8px;
}

#timeline .th-card p {
  margin: 6px 0 0;
  color: color-mix(in oklab, var(--th-text) 78%, transparent);
  font-size: 12px;
  line-height: 1.35;
}

/* Responsive */
@media (max-width: 600px) {
  #timeline {
    --card-w: 230px;
  }

  #timeline .th-controls input[type="range"] {
    width: 160px;
  }
}

/* Today card: fit-content with a bit of margin */
#timeline .th-card.th-card--today {
  width: fit-content;
  max-width: calc(var(--card-w) - 140px);
  min-width: 100px;
  padding: 8px 12px;
}

#timeline .th-card.th-card--today h3 {
  margin: 0;
}

/* Spacer so content doesn't go behind fixed header */
.header-spacer {
  height: var(--header-h);
}

/* Shared header base */
.header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: var(--header-h);
  display: flex;
  align-items: center;
  background: color-mix(in srgb, var(--bg) 80%, transparent);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--stroke);
  z-index: 1000;
  padding: 0;
}

.header__inner {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.header__left,
.header__right {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 0.9rem;
}

.header__right {
  margin-left: auto;
  justify-content: flex-end;
}

.header__center {
  display: flex;
  justify-content: center;
  font-size: 0.9rem;
  gap: 12px;
  flex: 1;
}

/* Brand */
.brand {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  color: var(--text);
}

.brand__logo {
  width: 34px;
  height: 34px;
  object-fit: contain;
}

.brand__name {
  font-weight: 700;
  letter-spacing: .2px;
}

/* Nav links */
.nav__link {
  text-decoration: none;
  color: var(--muted);
  font-weight: 600;
  padding: 10px 10px;
  border-radius: 10px;
}

.nav__link:hover {
  color: var(--text);
  background: var(--panel);
}

/* Chips (switch buttons) */
.chip {
  border: 1px solid var(--stroke);
  background: var(--panel);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 600;
}

.chip:hover {
  filter: brightness(1.08);
}

.chip--full {
  width: 100%;
  justify-content: center;
}

/* --------------------- */
/* Mobile header + sidebar */
/* --------------------- */
.header--mobile {
  display: none;
  /* shown on mobile via media query */
  justify-content: flex-start;
  gap: 12px;
  padding-left: 1rem;
  padding-right: 1rem;
}

.brand--mobile .brand__name {
  font-size: 1.05rem;
}

/* Burger */
.burger {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  border: 1px solid var(--stroke);
  background: var(--panel);
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  cursor: pointer;
}

.burger span {
  width: 18px;
  height: 2px;
  background: var(--text);
  display: block;
  border-radius: 2px;
}

/* Overlay */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, .5);
  z-index: 1001;
}

/* Sidebar */
.sidebar {
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: min(320px, 85vw);
  background: var(--bg);
  border-right: 1px solid var(--stroke);
  box-shadow: var(--shadow);
  z-index: 1002;

  transform: translateX(-105%);
  transition: transform .25s ease;
  display: flex;
  flex-direction: column;
  padding: 14px;
  gap: 14px;
}

.sidebar.is-open {
  transform: translateX(0);
}

.sidebar__top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 4px 10px;
  border-bottom: 1px solid var(--stroke);
}

.sidebar__title {
  font-weight: 800;
}

.sidebar__close {
  width: 40px;
  height: 40px;
  border-radius: 12px;
  border: 1px solid var(--stroke);
  background: var(--panel);
  color: var(--text);
  cursor: pointer;
}

.sidebar__nav {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding-top: 6px;
}

.sidebar__link {
  text-decoration: none;
  color: var(--text);
  background: var(--panel);
  border: 1px solid var(--stroke);
  padding: 12px 12px;
  border-radius: 14px;
  font-weight: 700;
}

.sidebar__link:hover {
  filter: brightness(1.08);
}

/* Separator between nav and actions */
.sidebar__sep {
  height: 1px;
  background: var(--stroke);
  margin: 10px 0;
}

/* Actions: keep them just after nav */
.sidebar__actions {
  margin-top: 0;
  /* <-- was auto */
  display: grid;
  gap: 10px;
}

/* --------------------- */
/* Responsive switch: show only one header */
/* --------------------- */
@media (max-width: 820px) {
  .header--desktop {
    display: none;
  }

  .header--mobile {
    display: flex;
  }

  :root {
    --header-h: 56px;
  }
}

/* Video prev/next buttons — light mode */
html[data-theme="light"] .scroll-btn {
  background: rgba(255, 255, 255, 0.45);
  border-color: var(--stroke);
  color: rgba(10, 18, 35, .92);
  /* ou var(--text) */

  box-shadow:
    0 0 0 2px rgba(255, 255, 255, 0.65),
    0 8px 24px rgba(10, 18, 35, 0.18);
}

html[data-theme="light"] .scroll-btn:hover {
  background: rgba(255, 255, 255, 0.88);
}

/* Desktop: navigation uniquement via dots */
@media (hover: hover) and (pointer: fine) {

  .projects.dots-only,
  .engagements.dots-only {
    overflow-x: auto !important;
    /* ✅ trackpad horizontal autorisé */
    cursor: default;
    user-select: auto;
    touch-action: pan-x pinch-zoom;
    /* ✅ autorise le geste horizontal */
    -webkit-user-select: auto;
  }
}

/* ============================================================
   Carousel focus states (safe: purely visual)
============================================================ */
.projects.is-carousel>.project,
.engagements.is-carousel>.project {
  transition: transform 220ms ease, opacity 220ms ease, filter 220ms ease;
  transform-origin: center;
}

/* Center card */
.projects.is-carousel>.project.is-center,
.engagements.is-carousel>.project.is-center {

  z-index: 2;
}

/* Side cards (same size, just de-emphasized) */
.projects.is-carousel>.project.is-left,
.projects.is-carousel>.project.is-right,
.engagements.is-carousel>.project.is-left,
.engagements.is-carousel>.project.is-right {

  z-index: 1;
}

/* Non-neighbors (optional: keep subtle) */
.projects.is-carousel>.project.is-off,
.engagements.is-carousel>.project.is-off {
  opacity: 0.55;
}

/* Side cards are clickable in carousel mode */
.projects.is-carousel>.project.is-left,
.projects.is-carousel>.project.is-right,
.engagements.is-carousel>.project.is-left,
.engagements.is-carousel>.project.is-right {
  cursor: pointer;
}

.projects.is-carousel>.project.is-center,
.engagements.is-carousel>.project.is-center {
  cursor: default;
}

/* ==========================================
   Interactions autorisées UNIQUEMENT sur la card centrée
   ========================================== */

/* Désactive les iframes (YouTube) sur les cards non centrées */
.projects.is-carousel>.project:not(.is-center) iframe,
.engagements.is-carousel>.project:not(.is-center) iframe {
  pointer-events: none;
}

/* Désactive les liens externes sur les cards non centrées
   (ex: tes liens portfolio en target=_blank dans "projects-personal") */
.projects.is-carousel>.project:not(.is-center) a[target="_blank"],
.engagements.is-carousel>.project:not(.is-center) a[target="_blank"] {
  pointer-events: none;
}

/* (optionnel) feedback visuel : “désactivé” */
.projects.is-carousel>.project:not(.is-center) a[target="_blank"],
.engagements.is-carousel>.project:not(.is-center) a[target="_blank"] {
  opacity: 0.6;
  cursor: default;
  text-decoration: none;
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {

  .projects.is-carousel>.project,
  .engagements.is-carousel>.project {
    transition: none !important;
  }
}

/* ===== Mobile fold: "Voir plus" details inside project cards ===== */
.project__more {
  margin-top: 10px;
}

.project__moreBtn {
  list-style: none;
  cursor: pointer;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  width: 100%;
  padding: 10px 12px;
  border-radius: 14px;

  border: 1px solid var(--stroke);
  background: color-mix(in oklab, var(--panel) 75%, transparent);
  font-weight: 750;
}

.project__moreBtn::-webkit-details-marker {
  display: none;
}

/* swap "Voir plus" / "Voir moins" */
.project__moreBtn .less {
  display: none;
}

.project__more[open] .project__moreBtn .more {
  display: none;
}

.project__more[open] .project__moreBtn .less {
  display: inline;
}

/* keep meta/pill nice when moved into details */
.project__more .project__meta {
  margin-top: 10px;
}

.project__more .project__pill {
  margin-top: 10px;
  display: inline-flex;
  width: fit-content;
}

@media (max-width: 700px) {

  .projects,
  .engagements {
    display: flex;
    flex-direction: column;
    overflow-x: hidden;
    scroll-snap-type: none;
    touch-action: auto;
  }

  .project {
    width: 100%;
    flex: none;
  }
}

@media (max-width: 700px) {

  /* ✅ Supprime les ombres des cards sur mobile */
  .project,
  .engagement {
    box-shadow: none !important;
  }
}